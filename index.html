<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Njet-routing by dariuszp</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/dariuszp/njet-routing">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/dariuszp/njet-routing/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/dariuszp/njet-routing/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Njet-routing</h1>
          <p>Routing for njet</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/dariuszp">dariuszp</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h1>
<a name="njet-routing-" class="anchor" href="#njet-routing-"><span class="octicon octicon-link"></span></a>njet-routing <a href="https://travis-ci.org/dariuszp/njet-routing"><img src="https://travis-ci.org/dariuszp/njet-routing.png?branch=master" alt="Build Status"></a>
</h1>

<h3>
<a name="request-methods" class="anchor" href="#request-methods"><span class="octicon octicon-link"></span></a>REQUEST METHODS</h3>

<div class="highlight highlight-JavaScript"><pre><span class="kd">var</span> <span class="nx">njetRouting</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'njet-routing'</span><span class="p">),</span>
    <span class="nx">router</span> <span class="o">=</span> <span class="nx">njetRouting</span><span class="p">.</span><span class="nx">createRouter</span><span class="p">();</span>
</pre></div>

<p>You can use following methods methods:</p>

<ul>
<li>get</li>
<li>post</li>
<li>put</li>
<li>delete</li>
<li>options</li>
<li>head</li>
<li>trace</li>
<li>connect</li>
<li>any (custom, when request method is not specified)</li>
</ul><h3>
<a name="add-route" class="anchor" href="#add-route"><span class="octicon octicon-link"></span></a>ADD ROUTE</h3>

<p>To add route for any verb use <em>router.{method}.add()</em> like this:</p>

<div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="s1">'/user/{type}'</span><span class="p">)</span>
</pre></div>

<p>where type is variable passed by user. Default regexp for any variable is ([^/]+).
Variable can have default value. Define it like this:</p>

<div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="s1">'/user/{type | super me}'</span><span class="p">)</span>
</pre></div>

<p>If you need specific pattern for "type", add it to third parameter - requirements:</p>

<div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="s1">'/user/{type | super me}'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">'[a-z]+'</span>
<span class="p">})</span>
</pre></div>

<p><em>Remember</em>, default value will be trimmed to "super me" and it will be not affected by provided requirement for type.</p>

<p>Now if "type" is not provided when generating url, default value will be "super me".</p>

<p>Also, each route can carry data object. For example while registering route, you want to keep some informations,
like controller name that should handle request or anything like that. If you want to have that information,
simply add 4th parameter to .add() method like this:</p>

<div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="s1">'/user/{type | super me}'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">'[a-z]+'</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="nx">myControllerName</span><span class="o">:</span> <span class="s1">'MySuperController'</span><span class="p">,</span>
    <span class="nx">myActionName</span><span class="o">:</span> <span class="s1">'CoolAction'</span><span class="p">,</span>
    <span class="nx">randomStuff</span><span class="o">:</span> <span class="s1">'my dog name is Cesar'</span>
<span class="p">})</span>
</pre></div>

<h3>
<a name="get-route" class="anchor" href="#get-route"><span class="octicon octicon-link"></span></a>GET ROUTE</h3>

<p>To retreive route, use get() method:</p>

<div class="highlight highlight-JavaScript"><pre><span class="kd">var</span> <span class="nx">route</span> <span class="o">=</span> <span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">)</span>
</pre></div>

<p>You will have full object with all data you provided so far.</p>

<h3>
<a name="generate-path" class="anchor" href="#generate-path"><span class="octicon octicon-link"></span></a>GENERATE PATH</h3>

<p>To generate url based on route name and arguments, use:</p>

<div class="highlight highlight-JavaScript"><pre><span class="kd">var</span> <span class="nx">route</span> <span class="o">=</span> <span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">generate</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">'superman'</span><span class="p">,</span>
    <span class="nx">age</span><span class="o">:</span> <span class="mi">26</span>
<span class="p">})</span>
</pre></div>

<p>Any unused parameter will be added to url as query string. In this specific case it will be like this:</p>

<pre><code>/user/superman?age=26
</code></pre>

<p>If type is omitted while default parameter is defined, default parameter will be used.
Default argument is add as alternative to regexp in requirements so both will always match.</p>

<p>If you need absolute url, set third argument to true:</p>

<div class="highlight highlight-JavaScript"><pre><span class="kd">var</span> <span class="nx">route</span> <span class="o">=</span> <span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">generate</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">'superman'</span><span class="p">,</span>
    <span class="nx">age</span><span class="o">:</span> <span class="mi">26</span>
<span class="p">},</span> <span class="kc">true</span><span class="p">)</span>
</pre></div>

<p>This will generate:</p>

<pre><code>http://localhost/user/superman?age=26
</code></pre>

<p>Remember that all arguments added to query string are sorted alphabetically so order on argument list does not matter.</p>

<p>To change scheme, base url or host, use:</p>

<ul>
<li>setHost()</li>
<li>setScheme()</li>
<li>setBaseUrl()</li>
<li>setPort()</li>
</ul><p>Like this:</p>

<div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">setScheme</span><span class="p">(</span><span class="s1">'https'</span><span class="p">).</span><span class="nx">setHost</span><span class="p">(</span><span class="s1">'dariuszp.com'</span><span class="p">).</span><span class="nx">setBaseUrl</span><span class="p">(</span><span class="s1">'my/new'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">route</span> <span class="o">=</span> <span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">generate</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">'superman'</span><span class="p">,</span>
    <span class="nx">age</span><span class="o">:</span> <span class="mi">26</span>
<span class="p">},</span> <span class="kc">true</span><span class="p">)</span>
</pre></div>

<p>This will generate:</p>

<pre><code>https://dariuszp.com/my/new/user/superman?age=26
</code></pre>

<p>Ad port as 4th parameter in case you want to change port for just this route:</p>

<div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">generate</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">'superman'</span><span class="p">,</span>
    <span class="nx">age</span><span class="o">:</span> <span class="mi">26</span>
<span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="mi">8983</span><span class="p">);</span>
</pre></div>

<p>This will generate:</p>

<pre><code>https://dariuszp.com:8983/my/new/user/superman?age=26
</code></pre>

<p>Default port 80 is never added to route for obvious reasons. If You want port to be always visible, you can force it:</p>

<pre><code>.forcePortInUrl(true)
</code></pre>

<p>Also if all your routes should have custom port, simply use:</p>

<pre><code>.setPort(8983); // for example port 8983
</code></pre>

<h3>
<a name="matching" class="anchor" href="#matching"><span class="octicon octicon-link"></span></a>MATCHING</h3>

<p>To find out if your path match any route, use match for any method (verbs):</p>

<div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="s1">'/user/superman?age=26'</span><span class="p">);</span>
</pre></div>

<p>.match() return either false or result object. Result object have properties:</p>

<ul>
<li>route - route object</li>
<li>routeParams - route in path extracted from given pattern</li>
<li>queryParams - params from query string</li>
<li>params - all params but <em>be aware</em> that if route param name match query param name, route param takes priority</li>
</ul><p>By aware that match will check either specific verb routes or all routes. ANY is just another group of routes.
Matching will not check any at any point. Programmer need to do it himself/herself.</p>

<h3>
<a name="debugging" class="anchor" href="#debugging"><span class="octicon octicon-link"></span></a>DEBUGGING</h3>

<p>To get all routes, use .dump(method = false, byName = false) method. Dump accept two arguments:</p>

<ul>
<li>method - dump only specific methods</li>
<li>byName - dump routes with names as keys</li>
</ul>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-49987464-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>