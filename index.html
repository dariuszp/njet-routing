<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Njet-routing : Routing for njet" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Njet-routing</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/dariuszp/njet-routing">View on GitHub</a>

          <h1 id="project_title">Njet-routing</h1>
          <h2 id="project_tagline">Routing for njet</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/dariuszp/njet-routing/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/dariuszp/njet-routing/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="njet-routing-" class="anchor" href="#njet-routing-"><span class="octicon octicon-link"></span></a>njet-routing <a href="https://travis-ci.org/dariuszp/njet-routing"><img src="https://travis-ci.org/dariuszp/njet-routing.png?branch=master" alt="Build Status"></a>
</h1>

<p>Routing for njet</p>

<h2>
<a name="changes-111" class="anchor" href="#changes-111"><span class="octicon octicon-link"></span></a>CHANGES 1.1.1</h2>

<ul>
<li>order for query string is alphabetical so providing parameters in different order wont change url</li>
<li>route can now specify port by either router.setPort() or by providing 4th argument to .generate()</li>
</ul><div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">generate</span><span class="p">(</span><span class="s1">'my_route'</span><span class="p">,</span> <span class="p">{},</span> <span class="kc">true</span><span class="p">,</span> <span class="mi">8983</span><span class="p">);</span> <span class="c1">// http://example.com:8983</span>
</pre></div>

<p>if for some reason you need to force port 80 in url, just set .forcePortInUrl(true) or false to disable</p>

<h2>
<a name="verbs" class="anchor" href="#verbs"><span class="octicon octicon-link"></span></a>VERBS</h2>

<div class="highlight highlight-JavaScript"><pre><span class="kd">var</span> <span class="nx">njetRouting</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'njet-routing'</span><span class="p">),</span>
    <span class="nx">router</span> <span class="o">=</span> <span class="nx">njetRouting</span><span class="p">.</span><span class="nx">createRouter</span><span class="p">();</span>
</pre></div>

<p>You can use following verb methods:</p>

<ul>
<li>get</li>
<li>post</li>
<li>put</li>
<li>delete</li>
<li>options</li>
<li>head</li>
<li>trace</li>
<li>connect</li>
<li>any</li>
</ul><h3>
<a name="add-route" class="anchor" href="#add-route"><span class="octicon octicon-link"></span></a>ADD ROUTE</h3>

<p>To add route for any verb use <em>router.{verb}.add()</em> like this:</p>

<div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="s1">'/user/{type}'</span><span class="p">)</span>
</pre></div>

<p>where type is variable passed to user. Default regexp for any variable is ([^/]+).
Variable can have default value. Define it like this:</p>

<div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="s1">'/user/{type | super me}'</span><span class="p">)</span>
</pre></div>

<p>If you need specific pattern for "type", add it to third parameter - requirements:</p>

<div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="s1">'/user/{type | super me}'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="p">[</span><span class="nx">a</span><span class="o">-</span><span class="nx">z</span><span class="p">]</span><span class="o">+</span>
<span class="p">})</span>
</pre></div>

<p><em>Remember</em>, default value will be trimmed to "super me" and it will be not affected by provided requirement for type.</p>

<p>Now if "type" is not provided when generating url, default value will be "super me".</p>

<h2>
<a name="get-route" class="anchor" href="#get-route"><span class="octicon octicon-link"></span></a>GET ROUTE</h2>

<p>To retreive route, use get() method:</p>

<div class="highlight highlight-JavaScript"><pre><span class="kd">var</span> <span class="nx">route</span> <span class="o">=</span> <span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">)</span>
</pre></div>

<h2>
<a name="generate-path" class="anchor" href="#generate-path"><span class="octicon octicon-link"></span></a>GENERATE PATH</h2>

<p>To generate url based on route name and arguments, use:</p>

<div class="highlight highlight-JavaScript"><pre><span class="kd">var</span> <span class="nx">route</span> <span class="o">=</span> <span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">generate</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">'superman'</span><span class="p">,</span>
    <span class="nx">age</span><span class="o">:</span> <span class="mi">26</span>
<span class="p">})</span>
</pre></div>

<p>Any unused parameter will be added to url as query string. In this specific case it will be like this:</p>

<pre><code>/user/superman?age=26
</code></pre>

<p>If type is omitted while default parameter is defined, default parameter will be used.
Default argument is add as alternative to regexp in requirements so both will always match.</p>

<p>If you need absolute url, set third argument to true:</p>

<div class="highlight highlight-JavaScript"><pre><span class="kd">var</span> <span class="nx">route</span> <span class="o">=</span> <span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">generate</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">'superman'</span><span class="p">,</span>
    <span class="nx">age</span><span class="o">:</span> <span class="mi">26</span>
<span class="p">},</span> <span class="kc">true</span><span class="p">)</span>
</pre></div>

<p>This will generate:</p>

<pre><code>http://localhost/user/superman?age=26
</code></pre>

<p>To change scheme, base url or host, use:</p>

<ul>
<li>setHost()</li>
<li>setScheme()</li>
<li>setBaseUrl()</li>
</ul><p>Like this:</p>

<div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">setScheme</span><span class="p">(</span><span class="s1">'https'</span><span class="p">).</span><span class="nx">setHost</span><span class="p">(</span><span class="s1">'dariuszp.com'</span><span class="p">).</span><span class="nx">setBaseUrl</span><span class="p">(</span><span class="s1">'my/new'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">route</span> <span class="o">=</span> <span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">generate</span><span class="p">(</span><span class="s1">'create_user'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">'superman'</span><span class="p">,</span>
    <span class="nx">age</span><span class="o">:</span> <span class="mi">26</span>
<span class="p">},</span> <span class="kc">true</span><span class="p">)</span>
</pre></div>

<p>This will generate:</p>

<pre><code>https://dariuszp.com/my/new/user/superman?age=26
</code></pre>

<h3>
<a name="matching" class="anchor" href="#matching"><span class="octicon octicon-link"></span></a>MATCHING</h3>

<p>To find out if your path match any route, use match for any method (verbs):</p>

<div class="highlight highlight-JavaScript"><pre><span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="s1">'/user/superman?age=26'</span><span class="p">);</span>
</pre></div>

<p>.match() return either false or result object. Result object have properties:</p>

<ul>
<li>route - route object</li>
<li>routeParams - route in path extracted from given pattern</li>
<li>queryParams - params from query string</li>
<li>params - all params but <em>be aware</em> that if route param name match query param name, route param takes priority</li>
</ul><p>By aware that match will check either specific verb routes or all routes. ANY is just another group of routes.
Matching will not check any at any point. Programmer need to do it himself/herself.</p>

<h3>
<a name="debugging" class="anchor" href="#debugging"><span class="octicon octicon-link"></span></a>Debugging</h3>

<p>To get all routes, use .dump(method = false, byName = false) method. Dump accept two arguments:</p>

<ul>
<li>method - dump only specific methods</li>
<li>byName - dump routes with names as keys</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Njet-routing maintained by <a href="https://github.com/dariuszp">dariuszp</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
